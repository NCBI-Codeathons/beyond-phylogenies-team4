#!/bin/bash

COVIDSEQNF_HOME=/blue/salemi/share/COVIDseq/covidseq-nf/

SAMPLES=$1
shift

if [[ -z $SAMPLES ]];
then
  echo "Usage: $0 SAMPLES [workflow-opts]"
  echo
  echo "where SAMPLES is a tab-delimited file containing three columns:"
  echo
  echo "sample    fastq_R1    fastq_R2"
  echo
  echo "NOTE: fastq_R1 and fastq_R2 should be absolute paths."
  echo
  exit
fi

if [[ ! -f nextflow.config ]];
then
  echo -n "No nextflow.config - proceed anyway? (y/N) "
  read ans
  if [[ "$ans" != "y" ]];
  then
    exit
  fi
fi

nextflow run -resume ${COVIDSEQNF_HOME}/covidseq.nf --samples $SAMPLES $*
